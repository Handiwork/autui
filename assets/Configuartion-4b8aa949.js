import{R as J,G as Qe,r as U,s as Lt,t as Qt,v as er,w as et,x as tr,j as ie,a as D,y as rr,V as It,P as Re,k as sr,Z as ir,z as nr,A as or,h as ur,X as vt,O as mt,I as lr,B as ar,D as cr,J as fr,K as Le,C as dr}from"./index-c99e5ed0.js";function $(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ce(e){return!!e&&!!e[z]}function ne(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===wr}(e)||Array.isArray(e)||!!e[_t]||!!e.constructor[_t]||tt(e)||rt(e))}function he(e,t,r){r===void 0&&(r=!1),fe(e)===0?(r?Object.keys:ut)(e).forEach(function(s){r&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,i){return t(i,s,e)})}function fe(e){var t=e[z];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:tt(e)?2:rt(e)?3:0}function Xe(e,t){return fe(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yr(e,t){return fe(e)===2?e.get(t):e[t]}function Tt(e,t,r){var s=fe(e);s===2?e.set(t,r):s===3?(e.delete(t),e.add(r)):e[t]=r}function hr(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function tt(e){return br&&e instanceof Map}function rt(e){return pr&&e instanceof Set}function re(e){return e.o||e.t}function st(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ar(e);delete t[z];for(var r=ut(t),s=0;s<r.length;s++){var i=r[s],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function it(e,t){return t===void 0&&(t=!1),nt(e)||ce(e)||!ne(e)||(fe(e)>1&&(e.set=e.add=e.clear=e.delete=gr),Object.freeze(e),t&&he(e,function(r,s){return it(s,!0)},!0)),e}function gr(){$(2)}function nt(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Z(e){var t=xr[e];return t||$(18,e),t}function bt(){return ge}function Ie(e,t){t&&(Z("Patches"),e.u=[],e.s=[],e.v=t)}function xe(e){$e(e),e.p.forEach(vr),e.p=null}function $e(e){e===ge&&(ge=e.l)}function pt(e){return ge={p:[],l:ge,h:e,m:!0,_:0}}function vr(e){var t=e[z];t.i===0||t.i===1?t.j():t.O=!0}function Te(e,t){t._=t.p.length;var r=t.p[0],s=e!==void 0&&e!==r;return t.h.g||Z("ES5").S(t,e,s),s?(r[z].P&&(xe(t),$(4)),ne(e)&&(e=Fe(t,e),t.l||De(t,e)),t.u&&Z("Patches").M(r[z].t,e,t.u,t.s)):e=Fe(t,r,[]),xe(t),t.u&&t.v(t.u,t.s),e!==Bt?e:void 0}function Fe(e,t,r){if(nt(t))return t;var s=t[z];if(!s)return he(t,function(o,c){return wt(e,s,t,o,c,r)},!0),t;if(s.A!==e)return t;if(!s.P)return De(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var i=s.i===4||s.i===5?s.o=st(s.k):s.o;he(s.i===3?new Set(i):i,function(o,c){return wt(e,s,i,o,c,r)}),De(e,i,!1),r&&e.u&&Z("Patches").R(s,r,e.u,e.s)}return s.o}function wt(e,t,r,s,i,o){if(ce(i)){var c=Fe(e,i,o&&t&&t.i!==3&&!Xe(t.D,s)?o.concat(s):void 0);if(Tt(r,s,c),!ce(c))return;e.m=!1}if(ne(i)&&!nt(i)){if(!e.h.F&&e._<1)return;Fe(e,i),t&&t.A.l||De(e,i)}}function De(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&it(t,r)}function Be(e,t){var r=e[z];return(r?re(r):e)[t]}function At(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=Object.getPrototypeOf(r)}}function qe(e){e.P||(e.P=!0,e.l&&qe(e.l))}function je(e){e.o||(e.o=st(e.t))}function Ke(e,t,r){var s=tt(t)?Z("MapSet").N(t,r):rt(t)?Z("MapSet").T(t,r):e.g?function(i,o){var c=Array.isArray(i),f={i:c?1:0,A:o?o.A:bt(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},m=f,b=Ze;c&&(m=[f],b=ye);var A=Proxy.revocable(m,b),w=A.revoke,v=A.proxy;return f.k=v,f.j=w,v}(t,r):Z("ES5").J(t,r);return(r?r.A:bt()).p.push(s),s}function mr(e){return ce(e)||$(22,e),function t(r){if(!ne(r))return r;var s,i=r[z],o=fe(r);if(i){if(!i.P&&(i.i<4||!Z("ES5").K(i)))return i.t;i.I=!0,s=xt(r,o),i.I=!1}else s=xt(r,o);return he(s,function(c,f){i&&yr(i.t,c)===f||Tt(s,c,t(f))}),o===3?new Set(s):s}(e)}function xt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return st(e)}var Ft,ge,ot=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",br=typeof Map<"u",pr=typeof Set<"u",Dt=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Bt=ot?Symbol.for("immer-nothing"):((Ft={})["immer-nothing"]=!0,Ft),_t=ot?Symbol.for("immer-draftable"):"__$immer_draftable",z=ot?Symbol.for("immer-state"):"__$immer_state",wr=""+Object.prototype.constructor,ut=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ar=Object.getOwnPropertyDescriptors||function(e){var t={};return ut(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},xr={},Ze={get:function(e,t){if(t===z)return e;var r=re(e);if(!Xe(r,t))return function(i,o,c){var f,m=At(o,c);return m?"value"in m?m.value:(f=m.get)===null||f===void 0?void 0:f.call(i.k):void 0}(e,r,t);var s=r[t];return e.I||!ne(s)?s:s===Be(e.t,t)?(je(e),e.o[t]=Ke(e.A.h,s,e)):s},has:function(e,t){return t in re(e)},ownKeys:function(e){return Reflect.ownKeys(re(e))},set:function(e,t,r){var s=At(re(e),t);if(s!=null&&s.set)return s.set.call(e.k,r),!0;if(!e.P){var i=Be(re(e),t),o=i==null?void 0:i[z];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(hr(r,i)&&(r!==void 0||Xe(e.t,t)))return!0;je(e),qe(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Be(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,je(e),qe(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=re(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty:function(){$(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$(12)}},ye={};he(Ze,function(e,t){ye[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ye.deleteProperty=function(e,t){return ye.set.call(this,e,t,void 0)},ye.set=function(e,t,r){return Ze.set.call(this,e[0],t,r,e[0])};var Fr=function(){function e(r){var s=this;this.g=Dt,this.F=!0,this.produce=function(i,o,c){if(typeof i=="function"&&typeof o!="function"){var f=o;o=i;var m=s;return function(L){var Q=this;L===void 0&&(L=f);for(var I=arguments.length,O=Array(I>1?I-1:0),T=1;T<I;T++)O[T-1]=arguments[T];return m.produce(L,function(_){var G;return(G=o).call.apply(G,[Q,_].concat(O))})}}var b;if(typeof o!="function"&&$(6),c!==void 0&&typeof c!="function"&&$(7),ne(i)){var A=pt(s),w=Ke(s,i,void 0),v=!0;try{b=o(w),v=!1}finally{v?xe(A):$e(A)}return typeof Promise<"u"&&b instanceof Promise?b.then(function(L){return Ie(A,c),Te(L,A)},function(L){throw xe(A),L}):(Ie(A,c),Te(b,A))}if(!i||typeof i!="object"){if((b=o(i))===void 0&&(b=i),b===Bt&&(b=void 0),s.F&&it(b,!0),c){var M=[],k=[];Z("Patches").M(i,b,M,k),c(M,k)}return b}$(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(b){for(var A=arguments.length,w=Array(A>1?A-1:0),v=1;v<A;v++)w[v-1]=arguments[v];return s.produceWithPatches(b,function(M){return i.apply(void 0,[M].concat(w))})};var c,f,m=s.produce(i,o,function(b,A){c=b,f=A});return typeof Promise<"u"&&m instanceof Promise?m.then(function(b){return[b,c,f]}):[m,c,f]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){ne(r)||$(8),ce(r)&&(r=mr(r));var s=pt(this),i=Ke(this,r,void 0);return i[z].C=!0,$e(s),i},t.finishDraft=function(r,s){var i=r&&r[z],o=i.A;return Ie(o,s),Te(void 0,o)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!Dt&&$(20),this.g=r},t.applyPatches=function(r,s){var i;for(i=s.length-1;i>=0;i--){var o=s[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(s=s.slice(i+1));var c=Z("Patches").$;return ce(r)?c(r,s):this.produce(r,function(f){return c(f,s)})},e}(),N=new Fr,Dr=N.produce;N.produceWithPatches.bind(N);N.setAutoFreeze.bind(N);N.setUseProxies.bind(N);N.applyPatches.bind(N);N.createDraft.bind(N);N.finishDraft.bind(N);var ve=e=>e.type==="checkbox",le=e=>e instanceof Date,P=e=>e==null;const jt=e=>typeof e=="object";var C=e=>!P(e)&&!Array.isArray(e)&&jt(e)&&!le(e),_r=e=>C(e)&&e.target?ve(e.target)?e.target.checked:e.target.value:e,Sr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,kr=(e,t)=>e.has(Sr(t)),me=e=>Array.isArray(e)?e.filter(Boolean):[],V=e=>e===void 0,y=(e,t,r)=>{if(!t||!C(e))return r;const s=me(t.split(/[,[\].]+?/)).reduce((i,o)=>P(i)?i:i[o],e);return V(s)||s===e?V(e[t])?r:e[t]:s};const St={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Y={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};J.createContext(null);var Vr=(e,t,r,s=!0)=>{const i={};for(const o in e)Object.defineProperty(i,o,{get:()=>{const c=o;return t[c]!==q.all&&(t[c]=!s||q.all),r&&(r[c]=!0),e[c]}});return i},H=e=>C(e)&&!Object.keys(e).length,Er=(e,t,r)=>{const{name:s,...i}=e;return H(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||q.all))},Ue=e=>Array.isArray(e)?e:[e];function Or(e){const t=J.useRef(e);t.current=e,J.useEffect(()=>{const r=i=>{i&&i.unsubscribe()},s=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(s)},[e.disabled])}var K=e=>typeof e=="string",Pr=(e,t,r,s)=>{const i=Array.isArray(e);return K(e)?(s&&t.watch.add(e),y(r,e)):i?e.map(o=>(s&&t.watch.add(o),y(r,o))):(s&&(t.watchAll=!0),r)},Ee=e=>typeof e=="function",Ut=e=>{for(const t in e)if(Ee(e[t]))return!0;return!1},Cr=(e,t,r,s,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:i||!0}}:{},lt=e=>/^\w*$/.test(e),zt=e=>me(e.replace(/["|']|\]/g,"").split(/\.|\[/));function F(e,t,r){let s=-1;const i=lt(t)?[t]:zt(t),o=i.length,c=o-1;for(;++s<o;){const f=i[s];let m=r;if(s!==c){const b=e[f];m=C(b)||Array.isArray(b)?b:isNaN(+i[s+1])?{}:[]}e[f]=m,e=e[f]}return e}const Ye=(e,t,r)=>{for(const s of r||Object.keys(e)){const i=y(e,s);if(i){const{_f:o,...c}=i;if(o&&t(o.name)){if(o.ref.focus&&V(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else C(c)&&Ye(c,t)}}};var kt=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),Mr=(e,t,r)=>{const s=me(y(e,r));return F(s,"root",t[r]),F(e,r,s),e},_e=e=>typeof e=="boolean",at=e=>e.type==="file",Ae=e=>K(e)||J.isValidElement(e),ct=e=>e.type==="radio",Se=e=>e instanceof RegExp;const Vt={value:!1,isValid:!1},Et={value:!0,isValid:!0};var Nt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!V(e[0].attributes.value)?V(e[0].value)||e[0].value===""?Et:{value:e[0].value,isValid:!0}:Et:Vt}return Vt};const Ot={isValid:!1,value:null};var Ht=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ot):Ot;function Pt(e,t,r="validate"){if(Ae(e)||Array.isArray(e)&&e.every(Ae)||_e(e)&&!e)return{type:r,message:Ae(e)?e:"",ref:t}}var ue=e=>C(e)&&!Se(e)?e:{value:e,message:""},Ct=async(e,t,r,s,i)=>{const{ref:o,refs:c,required:f,maxLength:m,minLength:b,min:A,max:w,pattern:v,validate:M,name:k,valueAsNumber:L,mount:Q,disabled:I}=e._f;if(!Q||I)return{};const O=c?c[0]:o,T=p=>{s&&O.reportValidity&&(O.setCustomValidity(_e(p)?"":p||" "),O.reportValidity())},_={},G=ct(o),be=ve(o),ee=G||be,oe=(L||at(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,W=Cr.bind(null,k,r,_),pe=(p,x,E,B=Y.maxLength,X=Y.minLength)=>{const te=p?x:E;_[k]={type:p?B:X,message:te,ref:o,...W(p?B:X,te)}};if(i?!Array.isArray(t)||!t.length:f&&(!ee&&(oe||P(t))||_e(t)&&!t||be&&!Nt(c).isValid||G&&!Ht(c).isValid)){const{value:p,message:x}=Ae(f)?{value:!!f,message:f}:ue(f);if(p&&(_[k]={type:Y.required,message:x,ref:O,...W(Y.required,x)},!r))return T(x),_}if(!oe&&(!P(A)||!P(w))){let p,x;const E=ue(w),B=ue(A);if(!P(t)&&!isNaN(t)){const X=o.valueAsNumber||+t;P(E.value)||(p=X>E.value),P(B.value)||(x=X<B.value)}else{const X=o.valueAsDate||new Date(t);K(E.value)&&(p=X>new Date(E.value)),K(B.value)&&(x=X<new Date(B.value))}if((p||x)&&(pe(!!p,E.message,B.message,Y.max,Y.min),!r))return T(_[k].message),_}if((m||b)&&!oe&&(K(t)||i&&Array.isArray(t))){const p=ue(m),x=ue(b),E=!P(p.value)&&t.length>p.value,B=!P(x.value)&&t.length<x.value;if((E||B)&&(pe(E,p.message,x.message),!r))return T(_[k].message),_}if(v&&!oe&&K(t)){const{value:p,message:x}=ue(v);if(Se(p)&&!t.match(p)&&(_[k]={type:Y.pattern,message:x,ref:o,...W(Y.pattern,x)},!r))return T(x),_}if(M){if(Ee(M)){const p=await M(t),x=Pt(p,O);if(x&&(_[k]={...x,...W(Y.validate,x.message)},!r))return T(x.message),_}else if(C(M)){let p={};for(const x in M){if(!H(p)&&!r)break;const E=Pt(await M[x](t),O,x);E&&(p={...E,...W(x,E.message)},T(E.message),r&&(_[k]=p))}if(!H(p)&&(_[k]={ref:O,...p},!r))return _}}return T(!0),_},Ge=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function se(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Ge&&(e instanceof Blob||e instanceof FileList))&&(r||C(e))){t=r?[]:{};for(const s in e){if(Ee(e[s])){t=e;break}t[s]=se(e[s])}}else return e;return t}var Mt=e=>({isOnSubmit:!e||e===q.onSubmit,isOnBlur:e===q.onBlur,isOnChange:e===q.onChange,isOnAll:e===q.all,isOnTouch:e===q.onTouched});function Rr(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=V(e)?s++:e[t[s++]];return e}function Lr(e){for(const t in e)if(!V(e[t]))return!1;return!0}function R(e,t){const r=lt(t)?[t]:zt(t),s=r.length==1?e:Rr(e,r),i=r[r.length-1];let o;s&&delete s[i];for(let c=0;c<r.slice(0,-1).length;c++){let f=-1,m;const b=r.slice(0,-(c+1)),A=b.length-1;for(c>0&&(o=e);++f<b.length;){const w=b[f];m=m?m[w]:e[w],A===f&&(C(m)&&H(m)||Array.isArray(m)&&Lr(m))&&(o?delete o[w]:delete e[w]),o=m}}return e}function ze(){let e=[];return{get observers(){return e},next:i=>{for(const o of e)o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}}var ke=e=>P(e)||!jt(e);function ae(e,t){if(ke(e)||ke(t))return e===t;if(le(e)&&le(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const i of r){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const c=t[i];if(le(o)&&le(c)||C(o)&&C(c)||Array.isArray(o)&&Array.isArray(c)?!ae(o,c):o!==c)return!1}}return!0}var Je=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},Wt=e=>e.type==="select-multiple",Ir=e=>ct(e)||ve(e),Ne=e=>Je(e)&&e.isConnected;function Ve(e,t={}){const r=Array.isArray(e);if(C(e)||r)for(const s in e)Array.isArray(e[s])||C(e[s])&&!Ut(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Ve(e[s],t[s])):P(e[s])||(t[s]=!0);return t}function Xt(e,t,r){const s=Array.isArray(e);if(C(e)||s)for(const i in e)Array.isArray(e[i])||C(e[i])&&!Ut(e[i])?V(t)||ke(r[i])?r[i]=Array.isArray(e[i])?Ve(e[i],[]):{...Ve(e[i])}:Xt(e[i],P(t)?{}:t[i],r[i]):r[i]=!ae(e[i],t[i]);return r}var He=(e,t)=>Xt(e,t,Ve(t)),$t=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>V(e)?e:t?e===""||P(e)?NaN:+e:r&&K(e)?new Date(e):s?s(e):e;function We(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return at(t)?t.files:ct(t)?Ht(e.refs).value:Wt(t)?[...t.selectedOptions].map(({value:r})=>r):ve(t)?Nt(e.refs).value:$t(V(t.value)?e.ref.value:t.value,e)}var Tr=(e,t,r,s)=>{const i={};for(const o of e){const c=y(t,o);c&&F(i,o,c._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:s}},de=e=>V(e)?void 0:Se(e)?e.source:C(e)?Se(e.value)?e.value.source:e.value:e,Br=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Rt(e,t,r){const s=y(e,r);if(s||lt(r))return{error:s,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),c=y(t,o),f=y(e,o);if(c&&!Array.isArray(c)&&r!==o)return{name:r};if(f&&f.type)return{name:o,error:f};i.pop()}return{name:r}}var jr=(e,t,r,s,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?s.isOnBlur:i.isOnBlur)?!e:(r?s.isOnChange:i.isOnChange)?e:!0,Ur=(e,t)=>!me(y(e,t)).length&&R(e,t);const zr={mode:q.onSubmit,reValidateMode:q.onChange,shouldFocusError:!0};function Nr(e={}){let t={...zr,...e},r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},s={},i=se(t.defaultValues)||{},o=t.shouldUnregister?{}:se(i),c={action:!1,mount:!1,watch:!1},f={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,b=0,A={};const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={watch:ze(),array:ze(),state:ze()},M=Mt(t.mode),k=Mt(t.reValidateMode),L=t.criteriaMode===q.all,Q=n=>u=>{clearTimeout(b),b=window.setTimeout(n,u)},I=async n=>{let u=!1;return w.isValid&&(u=t.resolver?H((await ee()).errors):await W(s,!0),!n&&u!==r.isValid&&(r.isValid=u,v.state.next({isValid:u}))),u},O=(n,u=[],l,d,h=!0,a=!0)=>{if(d&&l){if(c.action=!0,a&&Array.isArray(y(s,n))){const g=l(y(s,n),d.argA,d.argB);h&&F(s,n,g)}if(w.errors&&a&&Array.isArray(y(r.errors,n))){const g=l(y(r.errors,n),d.argA,d.argB);h&&F(r.errors,n,g),Ur(r.errors,n)}if(w.touchedFields&&a&&Array.isArray(y(r.touchedFields,n))){const g=l(y(r.touchedFields,n),d.argA,d.argB);h&&F(r.touchedFields,n,g)}w.dirtyFields&&(r.dirtyFields=He(i,o)),v.state.next({isDirty:p(n,u),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else F(o,n,u)},T=(n,u)=>{F(r.errors,n,u),v.state.next({errors:r.errors})},_=(n,u,l,d)=>{const h=y(s,n);if(h){const a=y(o,n,V(l)?y(i,n):l);V(a)||d&&d.defaultChecked||u?F(o,n,u?a:We(h._f)):B(n,a),c.mount&&I()}},G=(n,u,l,d,h)=>{let a=!1;const g={name:n},S=y(r.touchedFields,n);if(w.isDirty){const j=r.isDirty;r.isDirty=g.isDirty=p(),a=j!==g.isDirty}if(w.dirtyFields&&(!l||d)){const j=y(r.dirtyFields,n);ae(y(i,n),u)?R(r.dirtyFields,n):F(r.dirtyFields,n,!0),g.dirtyFields=r.dirtyFields,a=a||j!==y(r.dirtyFields,n)}return l&&!S&&(F(r.touchedFields,n,l),g.touchedFields=r.touchedFields,a=a||w.touchedFields&&S!==l),a&&h&&v.state.next(g),a?g:{}},be=async(n,u,l,d)=>{const h=y(r.errors,n),a=w.isValid&&r.isValid!==u;if(e.delayError&&l?(m=Q(()=>T(n,l)),m(e.delayError)):(clearTimeout(b),m=null,l?F(r.errors,n,l):R(r.errors,n)),(l?!ae(h,l):h)||!H(d)||a){const g={...d,...a?{isValid:u}:{},errors:r.errors,name:n};r={...r,...g},v.state.next(g)}A[n]--,w.isValidating&&!Object.values(A).some(g=>g)&&(v.state.next({isValidating:!1}),A={})},ee=async n=>t.resolver?await t.resolver({...o},t.context,Tr(n||f.mount,s,t.criteriaMode,t.shouldUseNativeValidation)):{},oe=async n=>{const{errors:u}=await ee();if(n)for(const l of n){const d=y(u,l);d?F(r.errors,l,d):R(r.errors,l)}else r.errors=u;return u},W=async(n,u,l={valid:!0})=>{for(const d in n){const h=n[d];if(h){const{_f:a,...g}=h;if(a){const S=f.array.has(a.name),j=await Ct(h,y(o,a.name),L,t.shouldUseNativeValidation,S);if(j[a.name]&&(l.valid=!1,u))break;!u&&(y(j,a.name)?S?Mr(r.errors,j,a.name):F(r.errors,a.name,j[a.name]):R(r.errors,a.name))}g&&await W(g,u,l)}}return l.valid},pe=()=>{for(const n of f.unMount){const u=y(s,n);u&&(u._f.refs?u._f.refs.every(l=>!Ne(l)):!Ne(u._f.ref))&&Pe(n)}f.unMount=new Set},p=(n,u)=>(n&&u&&F(o,n,u),!ae(dt(),i)),x=(n,u,l)=>{const d={...c.mount?o:V(u)?i:K(n)?{[n]:u}:u};return Pr(n,f,d,l)},E=n=>me(y(c.mount?o:i,n,e.shouldUnregister?y(i,n,[]):[])),B=(n,u,l={})=>{const d=y(s,n);let h=u;if(d){const a=d._f;a&&(!a.disabled&&F(o,n,$t(u,a)),h=Ge&&Je(a.ref)&&P(u)?"":u,Wt(a.ref)?[...a.ref.options].forEach(g=>g.selected=h.includes(g.value)):a.refs?ve(a.ref)?a.refs.length>1?a.refs.forEach(g=>!g.disabled&&(g.checked=Array.isArray(h)?!!h.find(S=>S===g.value):h===g.value)):a.refs[0]&&(a.refs[0].checked=!!h):a.refs.forEach(g=>g.checked=g.value===h):at(a.ref)?a.ref.value="":(a.ref.value=h,a.ref.type||v.watch.next({name:n})))}(l.shouldDirty||l.shouldTouch)&&G(n,h,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Oe(n)},X=(n,u,l)=>{for(const d in u){const h=u[d],a=`${n}.${d}`,g=y(s,a);(f.array.has(n)||!ke(h)||g&&!g._f)&&!le(h)?X(a,h,l):B(a,h,l)}},te=(n,u,l={})=>{const d=y(s,n),h=f.array.has(n),a=se(u);F(o,n,a),h?(v.array.next({name:n,values:o}),(w.isDirty||w.dirtyFields)&&l.shouldDirty&&(r.dirtyFields=He(i,o),v.state.next({name:n,dirtyFields:r.dirtyFields,isDirty:p(n,a)}))):d&&!d._f&&!P(a)?X(n,a,l):B(n,a,l),kt(n,f)&&v.state.next({}),v.watch.next({name:n})},ft=async n=>{const u=n.target;let l=u.name;const d=y(s,l);if(d){let h,a;const g=u.type?We(d._f):_r(n),S=n.type===St.BLUR||n.type===St.FOCUS_OUT,j=!Br(d._f)&&!t.resolver&&!y(r.errors,l)&&!d._f.deps||jr(S,y(r.touchedFields,l),r.isSubmitted,k,M),we=kt(l,f,S);F(o,l,g),S?(d._f.onBlur&&d._f.onBlur(n),m&&m(0)):d._f.onChange&&d._f.onChange(n);const Me=G(l,g,S,!1),Gt=!H(Me)||we;if(!S&&v.watch.next({name:l,type:n.type}),j)return Gt&&v.state.next({name:l,...we?{}:Me});if(!S&&we&&v.state.next({}),A[l]=(A[l],1),v.state.next({isValidating:!0}),t.resolver){const{errors:ht}=await ee([l]),Jt=Rt(r.errors,s,l),gt=Rt(ht,s,Jt.name||l);h=gt.error,l=gt.name,a=H(ht)}else h=(await Ct(d,y(o,l),L,t.shouldUseNativeValidation))[l],a=await I(!0);d._f.deps&&Oe(d._f.deps),be(l,a,h,Me)}},Oe=async(n,u={})=>{let l,d;const h=Ue(n);if(v.state.next({isValidating:!0}),t.resolver){const a=await oe(V(n)?n:h);l=H(a),d=n?!h.some(g=>y(a,g)):l}else n?(d=(await Promise.all(h.map(async a=>{const g=y(s,a);return await W(g&&g._f?{[a]:g}:g)}))).every(Boolean),!(!d&&!r.isValid)&&I()):d=l=await W(s);return v.state.next({...!K(n)||w.isValid&&l!==r.isValid?{}:{name:n},...t.resolver?{isValid:l}:{},errors:r.errors,isValidating:!1}),u.shouldFocus&&!d&&Ye(s,a=>y(r.errors,a),n?h:f.mount),d},dt=n=>{const u={...i,...c.mount?o:{}};return V(n)?u:K(n)?y(u,n):n.map(l=>y(u,l))},yt=(n,u)=>({invalid:!!y((u||r).errors,n),isDirty:!!y((u||r).dirtyFields,n),isTouched:!!y((u||r).touchedFields,n),error:y((u||r).errors,n)}),Kt=n=>{n?Ue(n).forEach(u=>R(r.errors,u)):r.errors={},v.state.next({errors:r.errors})},Zt=(n,u,l)=>{const d=(y(s,n,{_f:{}})._f||{}).ref;F(r.errors,n,{...u,ref:d}),v.state.next({name:n,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&d&&d.focus&&d.focus()},Yt=(n,u)=>Ee(n)?v.watch.subscribe({next:l=>n(x(void 0,u),l)}):x(n,u,!0),Pe=(n,u={})=>{for(const l of n?Ue(n):f.mount)f.mount.delete(l),f.array.delete(l),y(s,l)&&(u.keepValue||(R(s,l),R(o,l)),!u.keepError&&R(r.errors,l),!u.keepDirty&&R(r.dirtyFields,l),!u.keepTouched&&R(r.touchedFields,l),!t.shouldUnregister&&!u.keepDefaultValue&&R(i,l));v.watch.next({}),v.state.next({...r,...u.keepDirty?{isDirty:p()}:{}}),!u.keepIsValid&&I()},Ce=(n,u={})=>{let l=y(s,n);const d=_e(u.disabled);return F(s,n,{_f:{...l&&l._f?l._f:{ref:{name:n}},name:n,mount:!0,...u}}),f.mount.add(n),l?d&&F(o,n,u.disabled?void 0:y(o,n,We(l._f))):_(n,!0,u.value),{...d?{disabled:u.disabled}:{},...t.shouldUseNativeValidation?{required:!!u.required,min:de(u.min),max:de(u.max),minLength:de(u.minLength),maxLength:de(u.maxLength),pattern:de(u.pattern)}:{},name:n,onChange:ft,onBlur:ft,ref:h=>{if(h){Ce(n,u),l=y(s,n);const a=V(h.value)&&h.querySelectorAll&&h.querySelectorAll("input,select,textarea")[0]||h,g=Ir(a),S=l._f.refs||[];if(g?S.find(j=>j===a):a===l._f.ref)return;F(s,n,{_f:{...l._f,...g?{refs:[...S.filter(Ne),a,...Array.isArray(y(i,n))?[{}]:[]],ref:{type:a.type,name:n}}:{ref:a}}}),_(n,!1,void 0,a)}else l=y(s,n,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||u.shouldUnregister)&&!(kr(f.array,n)&&c.action)&&f.unMount.add(n)}}};return{control:{register:Ce,unregister:Pe,getFieldState:yt,_executeSchema:ee,_getWatch:x,_getDirty:p,_updateValid:I,_removeUnmounted:pe,_updateFieldArray:O,_getFieldArray:E,_subjects:v,_proxyFormState:w,get _fields(){return s},get _formValues(){return o},get _stateFlags(){return c},set _stateFlags(n){c=n},get _defaultValues(){return i},get _names(){return f},set _names(n){f=n},get _formState(){return r},set _formState(n){r=n},get _options(){return t},set _options(n){t={...t,...n}}},trigger:Oe,register:Ce,handleSubmit:(n,u)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=!0,h=se(o);v.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:a,values:g}=await ee();r.errors=a,h=g}else await W(s);H(r.errors)?(v.state.next({errors:{},isSubmitting:!0}),await n(h,l)):(u&&await u({...r.errors},l),t.shouldFocusError&&Ye(s,a=>y(r.errors,a),f.mount))}catch(a){throw d=!1,a}finally{r.isSubmitted=!0,v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:H(r.errors)&&d,submitCount:r.submitCount+1,errors:r.errors})}},watch:Yt,setValue:te,getValues:dt,reset:(n,u={})=>{const l=n||i,d=se(l),h=n&&!H(n)?d:i;if(u.keepDefaultValues||(i=l),!u.keepValues){if(u.keepDirtyValues)for(const a of f.mount)y(r.dirtyFields,a)?F(h,a,y(o,a)):te(a,y(h,a));else{if(Ge&&V(n))for(const a of f.mount){const g=y(s,a);if(g&&g._f){const S=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;try{if(Je(S)){S.closest("form").reset();break}}catch{}}}s={}}o=e.shouldUnregister?u.keepDefaultValues?se(i):{}:d,v.array.next({values:h}),v.watch.next({values:h})}f={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!w.isValid||!!u.keepIsValid,c.watch=!!e.shouldUnregister,v.state.next({submitCount:u.keepSubmitCount?r.submitCount:0,isDirty:u.keepDirty||u.keepDirtyValues?r.isDirty:!!(u.keepDefaultValues&&!ae(n,i)),isSubmitted:u.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:u.keepDirty||u.keepDirtyValues?r.dirtyFields:u.keepDefaultValues&&n?He(i,n):{},touchedFields:u.keepTouched?r.touchedFields:{},errors:u.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(n,u={})=>{y(s,n)&&(V(u.defaultValue)?te(n,y(i,n)):(te(n,u.defaultValue),F(i,n,u.defaultValue)),u.keepTouched||R(r.touchedFields,n),u.keepDirty||(R(r.dirtyFields,n),r.isDirty=u.defaultValue?p(n,y(i,n)):p()),u.keepError||(R(r.errors,n),w.isValid&&I()),v.state.next({...r}))},clearErrors:Kt,unregister:Pe,setError:Zt,setFocus:(n,u={})=>{const l=y(s,n)._f,d=l.refs?l.refs[0]:l.ref;d.focus(),u.shouldSelect&&d.select()},getFieldState:yt}}function Hr(e={}){const t=J.useRef(),[r,s]=J.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...Nr(e),formState:r};const i=t.current.control,o=J.useCallback(c=>{Er(c,i._proxyFormState,!0)&&(i._formState={...i._formState,...c},s({...i._formState}))},[i]);return Or({subject:i._subjects.state,callback:o}),J.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=Vr(r,i._proxyFormState),t.current}function Wr(e){return Qe({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M7.116 8l-4.558 4.558.884.884L8 8.884l4.558 4.558.884-.884L8.884 8l4.558-4.558-.884-.884L8 7.116 3.442 2.558l-.884.884L7.116 8z"}}]})(e)}function Xr(e){return Qe({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3v10h10V3H3zm9 9H4V4h8v8z"}}]})(e)}function $r(e){return Qe({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 5v9h9V5H3zm8 8H4V6h7v7z"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5 5h1V4h7v7h-1v1h2V3H5v2z"}}]})(e)}function qr(e){const t=U.useRef("");U.useEffect(()=>{e?(t.current=document.body.style.userSelect,document.body.style.userSelect="none"):document.body.style.userSelect=t.current},[e])}function qt(e,t){const[r,s]=U.useState(!1),i=U.useRef({x:0,y:0});qr(r);const o=U.useCallback(f=>{s(!0),i.current={x:f.clientX,y:f.clientY}},[]),c=U.useCallback(e,t??[]);return U.useEffect(()=>{const f=()=>{s(!1)};return document.addEventListener("mouseup",f),()=>{document.removeEventListener("mouseup",f)}}),U.useEffect(()=>{const f=m=>{if(r){const{x:b,y:A}=i.current;c({movementX:m.clientX-b,movementY:m.clientY-A}),i.current={x:m.clientX,y:m.clientY}}};return document.addEventListener("mousemove",f),()=>document.removeEventListener("mousemove",f)},[r]),o}function Kr(e,t){const r=U.useRef(t??e),s=r.current!==e;return U.useEffect(()=>{r.current=e},[e]),s}function Zr(e){const{title:t,children:r,restoreController:s=D(Re,{children:"restore"}),maximizeController:i=D(Re,{children:"maximize"}),closeController:o=D(Re,{children:"Close"})}=e,{x0:c,y0:f,x1:m,y1:b,z:A,mode:w}=er(),v=m-c,M=b-f,k=et(),L=tr(),Q=Kr(w),I=w==="MAXIMIZED"?{left:0,top:0,...L.screenSize,transition:"all ease-in-out .23s"}:{left:c,top:f,width:v,height:M};return ie(Yr,{style:{...I,zIndex:A*1e3,transition:Q?"all ease-in-out .23s":void 0},onMouseDownCapture:()=>k.focus(),children:[D(Gr,{title:t??"untitled",actions:ie(rr,{children:[w!=="MAXIMIZED"&&U.cloneElement(i,{onClick:()=>k.update(O=>({...O,mode:"MAXIMIZED"}))}),w!=="NORMAL"&&U.cloneElement(s,{onClick:()=>k.update(O=>({...O,mode:"NORMAL"}))}),U.cloneElement(o,{onClick:k.close})]})}),D(It,{}),D("div",{style:{flex:"1 1 auto"},children:r}),D(Jr,{thickness:16})]})}const Yr=Lt.div`
  ${Qt}
  background-color: ${e=>e.theme.colors.surface};
  border-radius: ${e=>e.theme.borderRadius};
  padding: ${e=>e.theme.spacing.containerPadding};

  box-sizing: border-box;

  display: flex;
  flex-direction: column;
  position: fixed;
`;function Gr(e){const{title:t,actions:r=[]}=e,s=et(),i=qt(o=>{s.move(o.movementX,o.movementY)});return ie("div",{style:{display:"flex",userSelect:"none"},onContextMenu:o=>{o.preventDefault()},onMouseDown:i,onDoubleClick:()=>s.update(o=>({...o,mode:o.mode==="MAXIMIZED"?"NORMAL":"MAXIMIZED"})),children:[D(sr,{style:{flex:"1 1 auto"},children:t}),r]})}function Jr(e){const{thickness:t}=e,r=t/2,s=et(),i=qt(o=>{s.resize({dx1:o.movementX,dy1:o.movementY})});return D("div",{onMouseDown:i,style:{position:"absolute",top:"100%",left:"100%",width:t,height:t,transform:`translate(-${r}px, -${r}px)`,cursor:"se-resize"}})}function os(){const e=ir(),t=nr(),{register:r,getValues:s,watch:i}=Hr({defaultValues:{root:e.fontSizes.root.replace("%",""),primary:e.colors.primary}}),o=i();return ie(or,{top:"48px",children:[ie(Qr,{children:[D(ur,{children:"Theme Settings"}),ie(vt,{children:["primary color:",D(mt,{type:"color",...r("primary")}),o.primary]}),ie(vt,{children:["root font size:",D(mt,{type:"range",min:"50",max:"100",...r("root")}),o.root,"%"]}),D(lr,{onClick:()=>t(Dr(c=>{c.colors=ar(s("primary")),c.fontSizes.root=`${s("root")}%`})),children:"Apply"})]}),D(It,{}),D(es,{})]})}const Qr=Lt(dr)`
  > label {
    display: block;
  }
`;function es(){const{manager:e}=cr();return D(fr,{onClick:()=>e.create(D(Zr,{title:"Example Dialog",closeController:D(Le,{children:D(Wr,{})}),maximizeController:D(Le,{children:D(Xr,{})}),restoreController:D(Le,{children:D($r,{})}),children:D("h1",{children:"Hello world"})})),children:"open window"})}export{os as default};
